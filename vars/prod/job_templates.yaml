---
controller_templates:
  - name: Prod - Hello World
    organization: MigrateMe-Corp
    project: Prod Sample Playbooks
    inventory: Prod App Inventory
    playbook: apache.yml
    credentials:
      - Prod Machine Credential
    description: Production smoke test
    verbosity: 0

  - name: Prod - Deploy App
    organization: MigrateMe-Corp
    project: Prod Sample Playbooks
    inventory: Prod App Inventory
    playbook: apache.yml
    credentials:
      - Prod Machine Credential
    description: Deploy application to production
    verbosity: 0
    ask_variables_on_launch: true
    limit: webservers

  - name: Prod - DB Backup
    organization: MigrateMe-Corp
    project: Prod Sample Playbooks
    inventory: Prod App Inventory
    playbook: apache.yml
    credentials:
      - Prod Machine Credential
      - Prod Vault Credential
    description: Backup production databases
    limit: databases

  - name: Prod - Network Audit
    organization: MigrateMe-Ops
    project: Prod Ops Playbooks
    inventory: Prod Network Inventory
    playbook: apache.yml
    credentials:
      - Prod Machine Credential
    description: Audit production network devices

controller_workflows:
  - name: Prod - Full Deploy Pipeline
    organization: MigrateMe-Corp
    description: Full deployment pipeline for production
    workflow_nodes:
      - identifier: backup_db
        unified_job_template:
          name: Prod - DB Backup
          type: job_template
        related:
          success_nodes:
            - identifier: deploy_app
      - identifier: deploy_app
        unified_job_template:
          name: Prod - Deploy App
          type: job_template
        related:
          success_nodes:
            - identifier: verify
      - identifier: verify
        unified_job_template:
          name: Prod - Hello World
          type: job_template
